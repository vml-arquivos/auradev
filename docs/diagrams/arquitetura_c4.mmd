graph TB
    subgraph "Camada de ApresentaÃ§Ã£o"
        WEB["ğŸŒ Interface Web<br/>React/Vue"]
        MOBILE["ğŸ“± App Mobile<br/>iOS/Android"]
    end

    subgraph "Camada de API Gateway"
        NGINX["âš™ï¸ NGINX<br/>Reverse Proxy<br/>Port 80/443"]
    end

    subgraph "Camada de ServiÃ§os"
        subgraph "Django (Port 8000)"
            DJANGO["ğŸ Django REST API<br/>- Auth JWT<br/>- CRUD PedagÃ³gico<br/>- Webhook Handler"]
            DB["ğŸ—„ï¸ PostgreSQL<br/>Port 5432"]
        end

        subgraph "AuraMind (Port 8001)"
            AURAMIND["ğŸ¤– FastAPI LLM Agent<br/>- SugestÃµes<br/>- AnÃ¡lises<br/>- Scoring"]
            CACHE["ğŸ’¾ Cache Redis<br/>Opcional"]
        end

        subgraph "n8n (Port 5678)"
            N8N["âš™ï¸ n8n Automation<br/>- Webhooks<br/>- Workflows<br/>- IntegraÃ§Ãµes"]
            N8N_DB["ğŸ—„ï¸ n8n DB<br/>SQLite/PostgreSQL"]
        end
    end

    subgraph "Camada de IntegraÃ§Ãµes Externas"
        GMAIL["ğŸ“§ Gmail SMTP"]
        WHATSAPP["ğŸ’¬ WhatsApp API"]
        GDRIVE["â˜ï¸ Google Drive"]
        SLACK["ğŸ’¼ Slack"]
    end

    subgraph "Camada de Infraestrutura"
        DOCKER["ğŸ³ Docker Compose<br/>- OrquestraÃ§Ã£o<br/>- Networking<br/>- Volumes"]
        LOGS["ğŸ“Š Logs & Monitoring<br/>ELK Stack"]
    end

    %% ConexÃµes Camada de ApresentaÃ§Ã£o
    WEB -->|HTTP/HTTPS| NGINX
    MOBILE -->|HTTP/HTTPS| NGINX

    %% ConexÃµes API Gateway
    NGINX -->|8000| DJANGO
    NGINX -->|8001| AURAMIND
    NGINX -->|5678| N8N

    %% ConexÃµes Django
    DJANGO -->|SQL| DB
    DJANGO -->|Webhook| N8N
    DJANGO -->|HTTP| AURAMIND

    %% ConexÃµes AuraMind
    AURAMIND -->|Cache| CACHE
    AURAMIND -->|HTTP| DJANGO

    %% ConexÃµes n8n
    N8N -->|SQL| N8N_DB
    N8N -->|HTTP| DJANGO
    N8N -->|HTTP| AURAMIND
    N8N -->|SMTP| GMAIL
    N8N -->|API| WHATSAPP
    N8N -->|API| GDRIVE
    N8N -->|API| SLACK

    %% ConexÃµes Infraestrutura
    DJANGO -->|Logs| LOGS
    AURAMIND -->|Logs| LOGS
    N8N -->|Logs| LOGS
    DOCKER -->|Gerencia| DJANGO
    DOCKER -->|Gerencia| AURAMIND
    DOCKER -->|Gerencia| N8N

    %% Estilos
    classDef presentation fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    classDef gateway fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef service fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef database fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    classDef external fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef infra fill:#f1f8e9,stroke:#33691e,stroke-width:2px

    class WEB,MOBILE presentation
    class NGINX gateway
    class DJANGO,AURAMIND,N8N service
    class DB,CACHE,N8N_DB database
    class GMAIL,WHATSAPP,GDRIVE,SLACK external
    class DOCKER,LOGS infra
